def test_positive_feature(page):
    page.goto("https://bank-buddy-crm-react.lovable.app/")
    click_customers(page)
    click_add_new_customer(page)
    enter_full_name(page, "John Doe")
    assert_enter_full_name(page, "John Doe")
    enter_email(page, "john.doe@example.com")
    assert_enter_email(page, "john.doe@example.com")
    enter_phone_number(page, "1234567890")
    assert_enter_phone_number(page, "1234567890")
    select_account_type(page, "Standard")
    enter_address(page, "123 Main St, Anytown, USA")
    assert_enter_address(page, "123 Main St, Anytown, USA")
    enter_occupation(page, "Software Engineer")
    assert_enter_occupation(page, "Software Engineer")
    enter_annual_income(page, "75000")
    assert_enter_annual_income(page, "75000")
    enter_initial_deposit(page, "1000")
    assert_enter_initial_deposit(page, "1000")
    click_add_customer(page)
    assert_enter_full_name(page, "John Doe")
    assert_enter_email(page, "john.doe@example.com")
    assert_enter_phone_number(page, "1234567890")
    assert_enter_address(page, "123 Main St, Anytown, USA")
    assert_enter_occupation(page, "Software Engineer")
    assert_enter_annual_income(page, "75000")
    assert_enter_initial_deposit(page, "1000")

def test_negative_feature(page):
    page.goto("https://bank-buddy-crm-react.lovable.app/")
    click_customers(page)
    click_add_new_customer(page)
    enter_full_name(page, "")
    assert_enter_full_name(page, "")
    enter_email(page, "invalid-email")
    assert_enter_email(page, "invalid-email")
    enter_phone_number(page, "")
    assert_enter_phone_number(page, "")
    select_account_type(page, "")
    enter_address(page, "")
    assert_enter_address(page, "")
    enter_occupation(page, "")
    assert_enter_occupation(page, "")
    enter_annual_income(page, "")
    assert_enter_annual_income(page, "")
    enter_initial_deposit(page, "")
    assert_enter_initial_deposit(page, "")
    click_add_customer(page)
    assert_enter_full_name(page, "")
    assert_enter_email(page, "invalid-email")
    assert_enter_phone_number(page, "")
    assert_enter_address(page, "")
    assert_enter_occupation(page, "")
    assert_enter_annual_income(page, "")
    assert_enter_initial_deposit(page, "")

def test_edge_feature(page):
    page.goto("https://bank-buddy-crm-react.lovable.app/")
    click_customers(page)
    click_add_new_customer(page)
    enter_full_name(page, "A" * 256)
    assert_enter_full_name(page, "A" * 256)
    enter_email(page, "verylongemail" + "a" * 240 + "@example.com")
    assert_enter_email(page, "verylongemail" + "a" * 240 + "@example.com")
    enter_phone_number(page, "!@#$%^&*()")
    assert_enter_phone_number(page, "!@#$%^&*()")
    select_account_type(page, "Standard")
    enter_address(page, "A" * 256)
    assert_enter_address(page, "A" * 256)
    enter_occupation(page, "A" * 256)
    assert_enter_occupation(page, "A" * 256)
    enter_annual_income(page, "9999999999")
    assert_enter_annual_income(page, "9999999999")
    enter_initial_deposit(page, "9999999999")
    assert_enter_initial_deposit(page, "9999999999")
    click_add_customer(page)
    assert_enter_full_name(page, "A" * 256)
    assert_enter_email(page, "verylongemail" + "a" * 240 + "@example.com")
    assert_enter_phone_number(page, "!@#$%^&*()")
    assert_enter_address(page, "A" * 256)
    assert_enter_occupation(page, "A" * 256)
    assert_enter_annual_income(page, "9999999999")
    assert_enter_initial_deposit(page, "9999999999")

def test_accessibility_feature(page):
    page.goto("https://bank-buddy-crm-react.lovable.app/")
    click_customers(page)
    click_add_new_customer(page)
    expect(page.get_by_text("Full Name")).to_be_visible()
    enter_full_name(page, "John Doe")
    assert_enter_full_name(page, "John Doe")
    expect(page.get_by_text("Email")).to_be_visible()
    enter_email(page, "john.doe@example.com")
    assert_enter_email(page, "john.doe@example.com")
    expect(page.get_by_text("Phone Number")).to_be_visible()
    enter_phone_number(page, "1234567890")
    assert_enter_phone_number(page, "1234567890")
    expect(page.get_by_text("Account Type")).to_be_visible()
    select_account_type(page, "Standard")
    expect(page.get_by_text("Address")).to_be_visible()
    enter_address(page, "123 Main St, Anytown, USA")
    assert_enter_address(page, "123 Main St, Anytown, USA")
    expect(page.get_by_text("Occupation")).to_be_visible()
    enter_occupation(page, "Software Engineer")
    assert_enter_occupation(page, "Software Engineer")
    expect(page.get_by_text("Annual Income")).to_be_visible()
    enter_annual_income(page, "75000")
    assert_enter_annual_income(page, "75000")
    expect(page.get_by_text("Initial Deposit")).to_be_visible()
    enter_initial_deposit(page, "1000")
    assert_enter_initial_deposit(page, "1000")
    click_add_customer(page)

def test_security_xss(page):
    page.goto("https://bank-buddy-crm-react.lovable.app/")
    click_customers(page)
    click_add_new_customer(page)
    enter_full_name(page, "<script>alert('XSS')</script>")
    assert_enter_full_name(page, "<script>alert('XSS')</script>")
    enter_email(page, '"><img src=x onerror=alert("XSS")>')
    assert_enter_email(page, '"><img src=x onerror=alert("XSS")>')
    enter_phone_number(page, "<script>alert('XSS')</script>")
    assert_enter_phone_number(page, "<script>alert('XSS')</script>")
    select_account_type(page, "Standard")
    enter_address(page, '"><img src=x onerror=alert("XSS")>')
    assert_enter_address(page, '"><img src=x onerror=alert("XSS")>')
    enter_occupation(page, "<script>alert('XSS')</script>")
    assert_enter_occupation(page, "<script>alert('XSS')</script>")
    enter_annual_income(page, '"><img src=x onerror=alert("XSS")>')
    assert_enter_annual_income(page, '"><img src=x onerror=alert("XSS")>')
    enter_initial_deposit(page, "<script>alert('XSS')</script>")
    assert_enter_initial_deposit(page, "<script>alert('XSS')</script>")
    click_add_customer(page)
    assert "<script>" not in page.content()

def test_security_sqli(page):
    page.goto("https://bank-buddy-crm-react.lovable.app/")
    click_customers(page)
    click_add_new_customer(page)
    enter_full_name(page, "' OR '1'='1")
    assert_enter_full_name(page, "' OR '1'='1")
    enter_email(page, "' OR '1'='1' --")
    assert_enter_email(page, "' OR '1'='1' --")
    enter_phone_number(page, "' OR '1'='1")
    assert_enter_phone_number(page, "' OR '1'='1")
    select_account_type(page, "Standard")
    enter_address(page, "' OR '1'='1' --")
    assert_enter_address(page, "' OR '1'='1' --")
    enter_occupation(page, "' OR '1'='1")
    assert_enter_occupation(page, "' OR '1'='1")
    enter_annual_income(page, "' OR '1'='1' --")
    assert_enter_annual_income(page, "' OR '1'='1' --")
    enter_initial_deposit(page, "' OR '1'='1")
    assert_enter_initial_deposit(page, "' OR '1'='1")
    click_add_customer(page)

def test_security_headers(page):
    response = page.goto("https://bank-buddy-crm-react.lovable.app/")
    headers = response.headers or {}
    assert any(k.lower() == "content-security-policy" for k in headers)
    assert any(k.lower() == "x-frame-options" for k in headers)